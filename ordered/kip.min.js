var KIP={Objects:{},Functions:{},Constants:{},Globals:{},Options:{},Test:{}};KIP.Functions.CreateSimpleElement=function(t,e,i,s){var n,o;n=document.createElement("div"),t&&n.setAttribute("id",t),e&&n.setAttribute("class",e),i&&(n.innerHTML=i);for(o in s)if(s.hasOwnProperty(o))try{n.setAttribute(s[o].key,s[o].val)}catch(r){continue}return n},KIP.Functions.CreateElement=function(t){var e,i,s,n,o;o=t.type||"div",e=document.createElement(o),t.id&&e.setAttribute("id",t.id),t.cls&&e.setAttribute("class",t.cls),t.before_content&&(e.innerHTML=t.before_content);for(i in t.attr)if(t.attr.hasOwnProperty(i))try{e.setAttribute(t.attr[i].key,t.attr[i].val)}catch(r){continue}for(s in t.children)if(t.children.hasOwnProperty(s))try{t.children[s].setAttribute?e.appendChild(t.children[s]):(n=KIP.Functions.CreateElement(t.children[s]),e.appendChild(n))}catch(r){continue}return t.after_content&&(e.innerHTML+=t.after_content),e},KIP.Functions.AddCSSClass=function(t,e){var i;t&&(t.Draw&&(t=t.div),i=" "+t.getAttribute("class")+" ",-1===i.indexOf(" "+e+" ")&&(i+=e,t.setAttribute("class",KIP.Functions.Trim(i))))},KIP.Functions.RemoveCSSClass=function(t,e){"use strict";var i,s;t&&(t.Draw&&(t=t.div),i=" "+t.getAttribute("class")+" ",s=i.length,i=i.replace(" "+e+" "," "),i.length!==s&&t.setAttribute("class",KIP.Functions.Trim(i)))},KIP.Functions.HasCSSClass=function(t,e){if(t){t.Draw&&(t=t.div);var i=" "+t.getAttribute("class")+" ";return-1===i.indexOf(" "+e+" ")?!1:!0}},KIP.Functions.SetCSSAttribute=function(t,e,i,s){var n,o,r,a;for(r=0;r<document.styleSheets.length;r+=1)if(o=document.all?"rules":"cssRules",a=document.styleSheets[r][o])for(n=0;n<a.length;n+=1)if(a[n].selectorText===t&&(a[n].style[e]||s))return a[n].style[e]=i,!0;return!1},KIP.Functions.GetCSSAttribute=function(t,e){var i,s,n,o;for(n=0;n<document.styleSheets.length;n+=1)if(s=document.all?"rules":"cssRules",o=document.styleSheets[n][s])for(i=0;i<o.length;i+=1)if(o[i].selectorText===t)return o[i].style[e];return""},KIP.Functions.GetComputedStyle=function(t,e){var i;return window.getComputedStyle?(i=window.getComputedStyle(t),e?i.getPropertyValue(e):i):t.currentStyle?(i=t.currentStyle,e?i[e]:i):void 0},KIP.Functions.GlobalOffsetLeft=function(t,e){return KIP.Functions.auxGlobalOffset(t,"offsetLeft",e)},KIP.Functions.GlobalOffsetTop=function(t,e){return KIP.Functions.auxGlobalOffset(t,"offsetTop",e)},KIP.Functions.GlobalOffsets=function(t,e){return{left:KIP.Functions.GlobalOffsetLeft(t,e),top:KIP.Functions.GlobalOffsetTop(t,e)}},KIP.Functions.auxGlobalOffset=function(t,e,i){for(var s=0;t&&t!==i;)t[e]&&(s+=t[e]),t=t.offsetParent;return s},KIP.Functions.FindCommonParent=function(t,e){var i,s;if(!t||!e)return void 0;for(i=t,s=e;i;){for(;s;){if(i===s)return i;s=s.parentNode}i=i.parentNode,s=e}return void 0},KIP.Functions.MoveRelToElem=function(t,e,i,s,n){var o,r,a,h;return o=KIP.Functions.GlobalOffsets(t),r=KIP.Functions.GlobalOffsets(t),a=r.left+i-o.left,h=r.top+s-o.top,n||(t.style.position="absolute",t.style.left=a+"px",t.style.top=h+"px"),{x:a,y:h}},KIP.Functions.RemoveSubclassFromAllElements=function(t,e,i){var s,n,o;for(s=document.getElementsByClassName(t),n=0;n<s.length;n+=1)o=s[n],o!==i&&KIP.Functions.RemoveCSSClass(o,e)},KIP.Functions.AddResizingElement=function(t,e,i,s){"use strict";var n,o;return KIP.Globals.Resizables||(KIP.Globals.Resizables=[]),n=KIP.Globals.Resizables.length,KIP.Globals.Resizables[n]={o_x:KIP.Functions.GlobalOffsetLeft(t),o_y:KIP.Functions.GlobalOffsetTop(t),o_w:t.offsetWidth,o_h:t.offsetHeight,g_w:i||window.innerWidth,g_h:s||window.innerWidth*e||window.innerHeight,h_w_ratio:e||1,elem:t},o=KIP.Globals.Resizables[n],window.addEventListener("resize",function(){KIP.Functions.ResizeElement(o)}),n},KIP.Functions.ResizeElement=function(t){var e,i,s,n;s=window.innerWidth/t.g_w,i=t.h_w_ratio*window.innerWidth||window.innerHeight,n=i/t.g_h,e=t.o_x/t.g_w,t.elem.style.left=e*window.innerWidth+"px",e=t.o_y/t.g_h,t.elem.style.top=e*i+"px",t.elem.style.width=t.o_w*s+"px",t.elem.style.height=t.o_h*n+"px"},KIP.Functions.RemoveElemFromArr=function(t,e,i){"use strict";var s;for(i||(i=function(t,e){return t===e}),s=t.length-1;s>=0;s-=1)i(t[s],e)&&t.splice(s,1)},KIP.Functions.RoundToPlace=function(t,e){return Math.round(t*e)/e},KIP.Globals.HoverOffsetEnum={Top:1,TopRightAlign:17,Bottom:2,BottomRightAlign:18,Left:4,LeftBottomAlign:36,Right:8,RightAlign:16,BottomAlign:32,RightBottomAlign:40,"Top-Left":5,"Top-Right":9,"Bottom-Left":6,"Bottom-Right":10,Custom:0},KIP.Objects.Hoverable=function(t,e,i,s,n,o,r){"use strict";this.id=t,this.cls="hoverable "+e,this.content=i,this.reference=s,this.offset=n||KIP.Globals.HoverOffsetEnum.Top,this.isSVG=o,this.adjust=r||{x:0,y:0},this.enabled=!1,KIP.Objects.Drawable.call(this,this.id,this.cls,this.content),this.div.style.position="absolute"},KIP.Objects.Hoverable.prototype=Object.create(KIP.Objects.Drawable.prototype),KIP.Objects.Hoverable.prototype.SetEnabled=function(t){this.enabled=t},KIP.Objects.Hoverable.prototype.Draw=function(t){var e=this;this.parent=t||this.parent,this.parent&&this.enabled&&(this.SetupParent(),this.MoveChild(),KIP.Objects.Drawable.prototype.Draw.call(this,this.parent),this.AdjustChild(),this.nudged=!0,window.setTimeout(function(){e.nudged||(e.NudgeOnscreen(),e.nudged=!0)},0))},KIP.Objects.Hoverable.prototype.SetupParent=function(){this.parent&&(this.parent.style.position=KIP.Functions.GetComputedStyle(this.parent,"position"),"static"===this.parent.style.position&&(this.parent.style.position="relative"))},KIP.Objects.Hoverable.prototype.MoveChild=function(){"use strict";var t,e,i,s,n;i=0,s=0,this.offset!==KIP.Globals.HoverOffsetEnum.Custom&&(this.reference||(this.reference=this.parent),this.isSVG?(n=this.reference.getBoundingClientRect(),i=n.left,t=n.right-n.left,e=n.bottom-n.top):(t=this.reference.offsetWidth,e=this.reference.offsetHeight),s+=this.offset&KIP.Globals.HoverOffsetEnum.Top?-1*e:this.offset&KIP.Globals.HoverOffsetEnum.Bottom?e:0,i+=this.offset&KIP.Globals.HoverOffsetEnum.Left?-1*t:this.offset&KIP.Globals.HoverOffsetEnum.Right?t:0,this.div.style.left=i+"px",this.div.style.top=s+"px")},KIP.Objects.Hoverable.prototype.AdjustChild=function(){"use strict";var t,e,i,s,n,o,r,a;this.offset!==KIP.Globals.HoverOffsetEnum.Custom&&(t=this.div.offsetWidth,e=this.div.offsetHeight,i=this.div.offsetLeft,s=this.div.offsetTop,n=KIP.Functions.GlobalOffsetLeft(this.div),o=KIP.Functions.GlobalOffsetTop(this.div),r=this.parent.offsetWidth,a=this.parent.offsetHeight,this.offset&KIP.Globals.HoverOffsetEnum.Top&&(s=-1*e),this.offset&KIP.Globals.HoverOffsetEnum.RightAlign&&(i=r-t),this.offset&KIP.Globals.HoverOffsetEnum.Left&&(i=-1*t),this.offset&KIP.Globals.HoverOffsetEnum.BottomAlign&&(s=a-e),0>n+t&&(i=this.reference.offsetWidth),n>window.innerWidth&&(i=-1*t),(o>window.innerHeight||0>n)&&(s=-1*e,i=0),0>o+e&&(s=this.reference.offsetHeight),KIP.Functions.MoveRelToElem(this.div,this.reference,i+(this.adjust.x||0),s+(this.adjust.y||0)))},KIP.Objects.Hoverable.prototype.NudgeOnscreen=function(){var t,e,i,s,n,o;this.offset!==KIP.Globals.HoverOffsetEnum.Custom&&(t=this.div.offsetWidth,e=this.div.offsetHeight,i=this.div.offsetLeft,s=this.div.offsetTop,n=KIP.Functions.GlobalOffsetLeft(this.div),o=KIP.Functions.GlobalOffsetTop(this.div),this.offset&KIP.Globals.HoverOffsetEnum.Left||this.offset&KIP.Globals.HoverOffsetEnum.Right||(0>n&&(i+=-1*n),n+t>window.innerWidth&&(i-=n+t-window.innerWidth)),this.offset&KIP.Globals.HoverOffsetEnum.Top||this.offset&KIP.Globals.HoverOffsetEnum.Bottom||(o+e>window.innerHeight&&(s-=o+e-window.innerHeight),0>o&&(s+=-1*o)),KIP.Functions.MoveRelToElem(this.div,this.reference,i,s))},KIP.Objects.ContextMenu=function(t){KIP.Objects.Drawable.call(this,"ctxMenu","ctxMenu"),this.options=[],this.xOptions=[],this.target=t||window,this.div.style.position="absolute",this.AddEventListeners()},KIP.Objects.ContextMenu.prototype=Object.create(KIP.Objects.Drawable.prototype),KIP.Objects.ContextMenu.prototype.AddOption=function(t,e){var i,s;i=this.options.length,s={},this.xOptions[t]=i,s.div=KIP.Functions.CreateSimpleElement("opt|"+i,"ctxOption",t),s.div.onclick=e,this.div.appendChild(s.div),s.label=t,s.callback=e},KIP.Objects.ContextMenu.prototype.RemoveOption=function(t){var e;e=this.xOptions[t],this.div.removeChild(this.options[e].div),this.options.splice(e,1)},KIP.Objects.ContextMenu.prototype.ClearOptions=function(){this.options.map(function(t){this.div.removeChild(t.div)}),this.options.length=0,this.xOptions.length=0},KIP.Objects.ContextMenu.prototype.AddEventListeners=function(){var t=this;window.addEventListener("contextmenu",function(){console.log("erasing"),t.Erase()},!0),window.addEventListener("click",function(e){t.Erase()}),this.target.addEventListener("contextmenu",function(e){var i,s;return t.Erase(),e.ctrlKey?!0:(e.stopPropagation(),e.preventDefault(),i=e.clientX,s=e.clientY,t.div.style.left=i+"px",t.div.style.top=s+"px",t.Draw(document.body),i+t.div.offsetWidth>window.innerWidth&&(i=window.innerWidth-t.div.offsetWidth),s+t.div.offsetHeight>window.innerHeight&&(s=window.innerHeight-t.div.offsetHeight),t.div.style.left=i+"px",t.div.style.top=s+"px",!1)},!1)},KIP.Objects.SVGDrawable=function(t){"use strict";this.div=KIP.Functions.CreateSVG(t),this.elements=[],this.elementsByID=[],this.min_x=1e6,this.min_y=1e6,this.max_x=0,this.max_y=0,this.gutter=1,this.cur_ID=0},KIP.Objects.SVGDrawable.prototype=Object.create(KIP.Objects.Drawable.prototype),KIP.Objects.SVGDrawable.prototype.CalculateView=function(){return this.min_x+" "+this.min_y+" "+(this.max_x-this.min_x)+" "+(this.max_y-this.min_y)},KIP.Objects.SVGDrawable.prototype.AddRectangle=function(t,e,i,s,n,o,r,a){"use strict";return this.UpdateView(t,e,i,s),this.AddChild("rect",{height:s,width:i,x:t,y:e},n,o,r,a)},KIP.Objects.SVGDrawable.prototype.UpdateView=function(t,e,i,s){t<this.min_x&&(this.min_x=t-this.gutter),t+i>this.max_x&&(this.max_x=t+i+this.gutter),e<this.min_y&&(this.min_y=e-this.gutter),e+s>this.max_y&&(this.max_y=e+s+this.gutter),this.view=this.CalculateView(),this.div.setAttribute("viewBox",this.view)},KIP.Objects.SVGDrawable.prototype.AddPath=function(t,e,i){},KIP.Objects.SVGDrawable.prototype.MoveTo=function(t,e,i){"use strict";var s;return s=i.getAttribute("d"),s+="M"+t+" "+e+"\n",i.setAttribute("d",s),i},KIP.Objects.SVGDrawable.prototype.LineTo=function(t,e,i){"use strict";var s;return s=i.getAttribute("d"),s+="L "+t+" "+e+"\n",i.setAttribute("d",s),i},KIP.Objects.SVGDrawable.prototype.CurveTo=function(t,e,i,s){"use strict";var n;return n=s.getAttribute("d"),n+="C "+t.x+" "+t.y+", ",n+=e.x+" "+e.y+", ",n+=i.x+" "+i.y+"\n",s.setAttribute("d",n),s},KIP.Objects.SVGDrawable.prototype.ArcTo=function(t,e,i,s,n,o){"use strict";var r;return r=o.getAttribute("d"),r+="A "+t.x+" "+t.y,r+=" "+e+" "+i+" "+s,r+=" "+KIP.Functions.RoundToPlace(n.x,1e3)+" "+KIP.Functions.RoundToPlace(n.y,1e3)+"\n",o.setAttribute("d",r),o},KIP.Objects.SVGDrawable.prototype.FinishPath=function(t){"use strict";var e;return e=t.getAttribute("d"),e+=" Z",t.setAttribute("d",e),t},KIP.Objects.SVGDrawable.prototype.AddRegularPolygon=function(t,e,i,s,n,o,r,a){"use strict";var h,l,c,u,d,p,f;for(this.UpdateView(t-s,e-s,2*s,2*s),h=KIP.Functions.RoundToPlace(KIP.Functions.DegreesToRadians(360/i),1e3),l=this.AddChild("polygon",{points:""},n,o,r,a),c="",f=0,u=0;i>u;u+=1)d=t+KIP.Functions.RoundToPlace(Math.sin(f)*s,10),p=e+KIP.Functions.RoundToPlace(-1*Math.cos(f)*s,10),f+=h,c+=d+","+p+" ";l.setAttribute("points",c)},KIP.Objects.SVGDrawable.prototype.AddRegularStar=function(t,e,i,s,n,o,r){},KIP.Objects.SVGDrawable.prototype.AddCircle=function(t,e,i,s,n,o,r){"use strict";return this.UpdateView(t-i,e-i,2*i,2*i),this.AddChild("circle",{cx:t,cy:e,r:i},s,n,o,r)},KIP.Objects.SVGDrawable.prototype.AddPath=function(){},KIP.Objects.SVGDrawable.prototype.AddPerfectArc=function(t,e,i,s,n,o,r,a,h,l){var c,u,d,p,f,b,y;return f=parseInt(r.stroke.width,10)||1,this.UpdateView(t.x-e-f,t.y-e-f,2*(e+f),2*(e+f)),d={},u={},p=s-i,d.x=Math.sin(KIP.Functions.DegreesToRadians(i))*e+t.x,d.y=-1*(Math.cos(KIP.Functions.DegreesToRadians(i))*e)+t.y,u.x=Math.sin(KIP.Functions.DegreesToRadians(s))*e+t.x,u.y=-1*(Math.cos(KIP.Functions.DegreesToRadians(s))*e)+t.y,b=parseInt(r.stroke.width,10)*Math.sqrt(2)||0,y=KIP.Functions.DegreesToRadians(p+i),c=this.AddChild("path",{d:""},r,a,h,l),d.y+=-1*Math.cos(y)*b,d.x+=Math.sin(y)*b,u.y+=-1*Math.cos(y)*b,u.x+=Math.sin(y)*b,t.y+=-1*Math.cos(y)*b,t.x+=Math.sin(y)*b,this.MoveTo(d.x,d.y,c),this.ArcTo({x:e,y:e},0,p>180?1:0,n,{x:u.x,y:u.y},c),o?c:(this.LineTo(t.x,t.y,c),this.FinishPath(c),c)},KIP.Objects.SVGDrawable.prototype.AddChild=function(t,e,i,s,n,o){"use strict";if(t){s||(s=this.cur_ID,this.cur_ID+=1);var r=KIP.Functions.CreateSVGElem(s,t,n,e);return this.AssignStyle(i,r),this.elements[this.elements.length]=r,this.elementsByID[s]=r,o?o.appendChild(r):this.div.appendChild(r),r}},KIP.Objects.SVGDrawable.prototype.AddText=function(t,e,i,s,n,o,r,a,h){var l,c,u,d,p,f,b,y;return t&&(c=parseInt(t.getAttribute("cx")),u=parseInt(t.getAttribute("cy")),d=parseInt(t.getAttribute("x")),p=parseInt(t.getAttribute("y")),d||0===d?i+=d:(c||0===c)&&(i=c-i),p||0===p?s+=p:(u||0===u)&&(s=u+s)),l=KIP.Functions.CreateSVGElem(o,"text",r,{x:i,y:s}),l.innerHTML=e,this.AssignStyle(n,l),f=this.MeasureElem(l),a&&(b=a.x*f.width,y=a.y*f.height,i-=b-0,s-=y-f.height,l.setAttribute("x",i),l.setAttribute("y",s)),this.UpdateView(i,s-f.height,f.width,f.height),h?h.appendChild(l):this.div.appendChild(l),l},KIP.Objects.SVGDrawable.prototype.MeasureElem=function(t){"use strict";var e,i,s;return e=this.parent,s=t.parentNode,document.body.appendChild(this.div),this.div.appendChild(t),i=t.getBBox(),this.div.removeChild(t),document.body.removeChild(this.div),this.parent=e,s&&s.appendChild(t),i},KIP.Objects.SVGDrawable.prototype.Draw=function(t,e,i,s){"use strict";(e!==this.w||i!==this.h||s!==this.view)&&this.AdjustSize(e,i,s),KIP.Objects.Drawable.prototype.Draw.call(this,t)},KIP.Objects.SVGDrawable.prototype.AssignStyle=function(t,e){t&&(t.fill&&this.AssignFillValues(t.fill,e),t.stroke&&this.AssignStrokeValues(t.stroke,e),t.font&&this.AssignFontValues(t.font,e))},KIP.Objects.SVGDrawable.prototype.AssignFontValues=function(t,e){return t?(t.size&&(e.style.fontSize=t.size),t.family&&(e.style.fontFamily=t.family),t.weight&&(e.style.fontWeight=t.weight),t.style&&(e.style.fontStyle=t.style),t.color&&(e.style.fill=t.color),e):e},KIP.Objects.SVGDrawable.prototype.AssignStrokeValues=function(t,e){"use strict";return t&&t.type&&"None"!==t.type?(t.color&&(e.style.stroke=t.color),t.opacity&&(e.style.strokeOpacity=t.opacity),t.width&&(e.style.strokeWidth=t.width),t.lineCap&&(e.style.strokeLinecap=t.lineCap),t.lineJoin&&(e.style.strokeLinejoin=t.lineJoin),e):(e.style.stroke="None",e)},KIP.Objects.SVGDrawable.prototype.AssignFillValues=function(t,e){return t&&t.type&&"None"!==t.type?(t.color&&(e.style.fill=t.color),t.opacity&&(e.style.fillOpacity=t.opacity),e):(e.style.fill="None",e)},KIP.Objects.SVGDrawable.prototype.AssignPoints=function(t,e){},KIP.Objects.SVGDrawable.prototype.AdjustStyle=function(t,e,i){e||(e=this.elementsByID[t]),e&&this.AssignStyle(i,e)},KIP.Objects.SVGDrawable.prototype.AdjustSize=function(t,e,i){t&&this.w!==t&&(this.w=t||this.w,this.div.setAttribute("width",this.w)),e&&this.h!==e&&(this.h=e||this.h,this.div.setAttribute("height",this.h)),(i&&this.view!==i||!this.view)&&(this.view=i||this.CalculateView(),this.div.setAttribute("viewBox",this.view))},KIP.Objects.SVGDrawable.prototype.GetElement=function(t){return this.elementsByID[t]},KIP.Objects.SVGDrawable.prototype.CreateGradient=function(t,e){},KIP.Objects.SVGDrawable.prototype.CreateGroup=function(t){"use strict";return this.AddChild("g",[],{},t)},KIP.Objects.SVGDrawable.prototype.SetAttribute=function(t,e){"use strict";this.div.setAttribute(t,e)},KIP.Objects.SVGDrawable.prototype.Clear=function(){"use strict";var t,e;for(e=this.div.children.length-1;e>=1;e-=1)t=this.div.children[e],this.div.removeChild(t)},KIP.Objects.Select=function(t){"use strict";KIP.Objects.Drawable.call(this,t,"select"),this.id=t,this.input=KIP.Functions.CreateElement({type:"input",cls:"select",id:"input"+t}),this.data=[],this.dataDiv=KIP.Functions.CreateSimpleElement("data"+t,"dropdown"),this.selectedData=-1,this.options=[],this.visible=[],this.visibleCnt=0,this.div.appendChild(this.input),this.div.appendChild(this.dataDiv),this.AddListeners()},KIP.Objects.Select.prototype=Object.create(KIP.Objects.Drawable.prototype),KIP.Objects.Select.prototype.AddListeners=function(){"use strict";var t;t=this,this.input.addEventListener("focus",function(){t.Dropdown()}),this.input.addEventListener("blur",function(){t.Dropdown(!0)}),this.input.addEventListener("keydown",function(e){t.expanded&&(40===e.keyCode?t.HiliteNext():38===e.keyCode?t.HilitePrevious():13===e.keyCode&&t.Validate())}),this.input.addEventListener("input",function(e){return t.Filter(),e.stopPropagation(),!1})},KIP.Objects.Select.prototype.Dropdown=function(t){"use strict";t?(KIP.Functions.RemoveCSSClass(this.dataDiv,"expanded"),this.expanded=!1):(KIP.Functions.AddCSSClass(this.dataDiv,"expanded"),this.expanded=!0,this.selectedData=0,this.hiliteNext=0)},KIP.Objects.Select.prototype.AddData=function(t){"use strict";var e,i,s,n,o;n=this,s=function(t,e){t.addEventListener("mousedown",function(t){n.Select(n.data[e])})};for(e in t)t.hasOwnProperty(e)&&(o=this.data.push({key:e,val:t[e]}),i=KIP.Functions.CreateSimpleElement("opt"+this.id+"|"+o,"opt",t[e]),this.options.push(i),this.visible.push(!0),this.visibleCnt+=1,s(i,o-1),this.dataDiv.appendChild(i))},KIP.Objects.Select.prototype.Filter=function(){"use strict";var t,e,i;for(e=this.input.value,t=0;t<this.data.length;t+=1)i=this.data[t].key.indexOf(e),-1===i&&(i=this.data[t].val.indexOf(e)),-1===i&&this.visible[t]&&(KIP.Functions.AddCSSClass(this.options[t],"filtered"),t===this.selectedData&&(this.selectedData=-1),this.visible[t]=!1,this.visibleCnt-=1),-1!==i&&(this.visible[t]||(KIP.Functions.RemoveCSSClass(this.options[t],"filtered"),this.visible[t]=!0,this.visibleCnt+=1))},KIP.Objects.Select.prototype._Hilite=function(t){"use strict";var e,i,s;if(0!==this.dataDiv.children.length){for(this.selectedData>=0&&KIP.Functions.RemoveCSSClass(this.options[this.selectedData],"selected"),i=0;!s;)if(e=this.selectedData+t,0>e&&(e=this.data.length-1),e>=this.data.length&&(e=0),this.visible[e]&&(s=!0),i+=1,i>this.data.length)return;KIP.Functions.AddCSSClass(this.options[e],"selected"),this.selectedData=e}},KIP.Objects.Select.prototype.HiliteNext=function(){return this._Hilite(1)},KIP.Objects.Select.prototype.HilitePrevious=function(){return this._Hilite(-1)},KIP.Objects.Select.prototype.Select=function(t){"use strict";this.value=t.key,this.input.value=t.val},KIP.Objects.Select.prototype.Validate=function(){"use strict";var t;t=this.input.value,-1!==this.selectedData&&(this.data[this.selectedData].key.indexOf(t)>=0||this.data[this.selectedData].val.indexOf(t)>=0)&&this.select(this.selectedData)},KIP.Objects.Collection=function(){"use strict";this.data=[],this.backData={}},KIP.Objects.Collection.prototype.Length=function(){"use strict";return this.data.length},KIP.Objects.Collection.prototype.AddElement=function(t,e,i,s){"use strict";var n,o,r,a;if(this.DoesElementExist(t)){if(!s)return null;this.RemoveElement(t)}if(n={key:t,value:e},i||0===i?(this.data.splice(i,0,n),o=!0):i=this.data.push(n),this.backData[t]=i,o)for(r in this.backData)this.backData.hasOwnProperty(r)&&(a=this.backData[r],a>=i&&r!==t&&(this.backData[r]+=1));return i},KIP.Objects.Collection.prototype.RemoveElement=function(t,e){"use strict";var i,s,n;e||0===e||(e=this.GetElementIdx(t)),n=this.data.splice(e,1),delete this.backData[t];for(i in this.backData)this.backData.hasOwnProperty(i)&&(s=this.backData[i],s>e&&(this.backData[i]-=1));return{key:t,idx:e,value:n}},KIP.Objects.Collection.prototype.RemoveElementAtIndex=function(t){"use strict";var e;return e=this.GetElementKey(t),this.RemoveElement(e,t)},KIP.Objects.Collection.prototype.GetElement=function(t,e){"use strict";return e||0===e||(e=this.GetElementIdx(t)),(e||0===e)&&(this.data[e]||0===this.data[e])?this.data[e].value:null},KIP.Objects.Collection.prototype.GetElementByIdx=function(t){"use strict";var e=this.GetElementKey(t);return this.GetElement(e,t)},KIP.Objects.Collection.prototype.GetElementIdx=function(t){"use strict";return this.backData[t]},KIP.Objects.Collection.prototype.GetElementKey=function(t){"use strict";var e=this.data[t];return e||0===e?this.data[t].key:null},KIP.Objects.Collection.prototype.Sort=function(t){"use strict";return this.data.sort(t)},KIP.Objects.Collection.prototype.MergeCollection=function(t,e){"use strict";var i,s,n;for(s=0;s<t.data.length;s+=1)if(i=t.data[s],this.backData.hasOwnProperty(i)){if(e)continue;this.data[this.backData[i]]=t.data[s]}else n=this.data.push(t.data[s]),this.backData[i]=n},KIP.Objects.Collection.prototype.Clear=function(){"use strict";this.data=[],this.backData={}},KIP.Objects.Collection.prototype.GetNextIndex=function(){"use strict";return this.data.length},KIP.Objects.Collection.prototype.DoesElementExist=function(t){"use strict";var e;return e=this.backData[t],e||0===e?!!this.data[e]:!1},KIP.Constants.GraphTypeEnum={Pie:0,Bar:1,Circle:2,Tier:3,Line:4,Trend:5},KIP.Objects.Graph=function(t,e){this.id=t,this.data=[],this.dataListeners=[],this.type=e,this.sortedData=[],this.elems=[],KIP.Objects.SVGDrawable.call(this,t)},KIP.Objects.Graph.prototype=Object.create(KIP.Objects.SVGDrawable.prototype),KIP.Objects.Graph.prototype.AddData=function(t,e,i,s,n){"use strict";var o;return o=this.data.length,this.data[o]={lbl:t,x:e,y:i,z:s,extra:n},this.AddDataAppropriateForGraph(o),o},KIP.Objects.Graph.prototype.AddDataAppropriateForGraph=function(t){"use strict"},KIP.Objects.Graph.prototype.AddListenerToData=function(t,e,i){"use strict";var s;this.dataListeners[t]||(this.dataListeners[t]=[]),s=this.dataListeners[t].length,this.dataListeners[t][s]={type:e,listener:i}},KIP.Objects.Graph.prototype.AttachDataListeners=function(t,e){"use strict";var i,s,n,o;if(s=this.dataListeners[t])for(o=0;o<s.length;o+=1)s[o]&&(i=s[o].type,n=s[o].listener,i&&n&&e.addEventListener(i,n))},KIP.Objects.CircularGraph=function(t,e){"use strict";KIP.Objects.Graph.call(this,t,e)},KIP.Objects.CircularGraph.prototype=Object.create(KIP.Objects.Graph.prototype),KIP.Objects.CircularGraph.prototype.AddTextAroundRing=function(t,e,i,s,n,o,r,a,h){"use strict";var l,c,u,d,p,f,b,y;if(this.radius)return n=n||this.radius,l=e+(i-e)/2,c=KIP.Functions.DegreesToRadians(l),d=KIP.Functions.RoundToPlace(-1*Math.cos(c),1e3),u=KIP.Functions.RoundToPlace(Math.sin(c),1e3),p={},p.y=d/-4+.75,p.x=u/-2+.5,f=this.AddText(s,t,this.center.x+u*(n+1),this.center.y+(n+1)*d,this.fontStyle,o,r,p,a),h&&(y=this.MeasureElem(f),b=((i-e)/2+e)%45+315,f.setAttribute("transform","rotate("+b+" "+(y.x+y.width/2)+" "+(y.y+y.height/2)+")")),f},KIP.Objects.CircularGraph.prototype.AddPieceListeners=function(t,e,i){"use strict";t&&e&&(t.addEventListener("mouseover",function(){e.style.opacity=1,i&&(i.style.opacity=.8)}),t.addEventListener("mouseout",function(){e.style.opacity=0,i&&(i.style.opacity=0)}),e.style.transition="opacity ease-in-out .2s",e.style.opacity=0,i&&(i.style.opacity=0,i.style.transition="opacity ease-in-out .2s"))},KIP.Objects.PieGraph=function(t,e,i,s,n){"use strict";this.center=e||{x:80,y:80},this.radius=i||30,this.total=0,this.style=s||{stroke:{type:"solid",color:"#000",width:"0px"},fill:{type:"solid"}},this.fontStyle={font:{family:"Segoe UI",size:"10px"},fill:{type:"solid"}},this.hslRotate=KIP.Constants.HSLPieceEnum.Saturation,this.labelAtTop=n||!1,this.sort=!0,this.keyX=0,this.keyY=0,this.days=0,this.addLabels=!0,this.addKey=!0,KIP.Objects.CircularGraph.call(this,t,KIP.Constants.GraphTypeEnum.Pie)},KIP.Objects.PieGraph.prototype=Object.create(KIP.Objects.CircularGraph.prototype),KIP.Objects.PieGraph.prototype.ChooseColorRotate=function(t){this.hslRotate=t},KIP.Objects.PieGraph.prototype.Refresh=function(){var t,e,i,s,n,o,r,a,h,l,c,u,d,p,f;for(r=this.style,n=0,this.Clear(),h=this.CreateGroup("wedges"),c=this.CreateGroup("boxes"),l=this.CreateGroup("text"),this.keyOnRadius?(this.keyX=this.center.x+this.radius+5,this.keyY=this.center.y-this.radius+this.gutter):(this.keyX=this.max_x||0,this.keyY=this.min_y),this.sortedArray=this.data.slice(),this.sort&&(this.sortedArray=this.sortedArray.sort(function(t,e){return t.x>e.x?-1:t.x<e.x?1:0})),p=0;p<this.sortedArray.length;p+=1)t=this.sortedArray[p],e=t.id,s=t.x/this.total,a=t.y||this.radius,this.fontStyle.fill.color=r.fill.color=KIP.Functions.GenerateColor("",this.hslRotate),i=1===this.data.length?this.AddCircle(this.center.x,this.center.y,a,this.style,"","",h):this.AddPerfectArc(this.center,a,n,n+360*s,1,!1,r,"","",h),this.addLabels&&(this.labelAtTop?(o=this.AddText(i,t.lbl,this.center.x-this.radius,this.center.y-this.radius-16,this.fontStyle,"","","",l),u=this.MeasureElem(o),d=this.AddRectangle(u.x,u.y,u.width,u.height,{fill:{type:"solid",color:"#FFF"}},"","",c)):o=this.AddTextAroundRing(t.lbl,n,n+360*s,i,a,"","",l,this.rotate)),this.addKey&&(f=this.AddDataToKey(t,l)),this.AddPieceListeners(i,o,d),this.AttachDataListeners(e,i),n+=360*s,this.elems[e]={piece:i,label:o,labelBox:d,color:r.fill.color,keyText:f};this.addKey&&(this.fontStyle.fill.color="#000",this.keyY+=5,this.AddDataToKey({x:this.total,lbl:"TOTAL"},l),this.days&&this.AddDataToKey({x:KIP.Functions.RoundToPlace(this.total/this.days,10),lbl:"Avg Day"},l))},KIP.Objects.PieGraph.prototype.AddDataToKey=function(t,e){"use strict";var i,s,n;return n=JSON.parse(JSON.stringify(this.fontStyle)),n.font.size="6",i=this.AddText(void 0,t.lbl+" : "+t.x,this.keyX,this.keyY,n,"","","",e),s=this.MeasureElem(i),this.keyY=this.keyY+s.height,i},KIP.Objects.PieGraph.prototype.AddDataAppropriateForGraph=function(t){"use strict";var e;e=this.data[t],this.total+=e.x,e.id=t,this.parent&&this.Draw()},KIP.Objects.CircleGraph=function(t,e,i,s){"use strict";this.center=e||{x:80,y:80},this.radius=i||30,this.ringTotals=[],this.style=s||{stroke:{type:"solid",color:"#000",width:"5px"},fill:{}},this.fontStyle={font:{family:"Segoe UI",size:"10px"},fill:{type:"solid"}},this.strokeWidth=5,KIP.Objects.CircularGraph.call(this,t,KIP.Constants.GraphTypeEnum.Circle)},KIP.Objects.CircleGraph.prototype=Object.create(KIP.Objects.CircularGraph.prototype),KIP.Objects.CircleGraph.prototype.Refresh=function(){"use strict";var t,e,i,s,n,o,r,a,h,l,c,u,d,p,f;for(p=this.CreateGroup("rings"),f=this.CreateGroup("text"),n=Math.max.apply(this,this.ringTotals),t={},l=[],i=0;i<this.data.length;i+=1)s=this.data[i],t[s.lbl]||(t[s.lbl]=KIP.Functions.GenerateColor(s.lbl,KIP.Constants.HSLPieceEnum.Hue)),u=t[s.lbl],r=s.y,a=s.z*this.strokeWidth,l[r]||(l[r]=0),c=360*s.x/n+l[r],0>r?(r=-1*r,d=.4):d=1,h=this.radius+this.radius/2*r,this.style.stroke.width=a+"px",this.style.stroke.color=u,o=this.AddPerfectArc(this.center,h,l[r],c,1,!0,this.style,"","",p),o.style.opacity=d,e=this.AddTextAroundRing(s.lbl,l[r],c,o,h+(a-this.strokeWidth),"","",f),this.div.appendChild(o),this.AddPieceListeners(o,e),this.AttachDataListeners(i,o),l[r]=c},KIP.Objects.CircleGraph.prototype.AddDataAppropriateForGraph=function(t){"use strict";var e,i;i=this.data[t],e=i.y,0>e&&(e=-1*e),this.ringTotals[e]||(this.ringTotals[e]=0),this.ringTotals[e]+=i.x,this.parent&&this.Draw()},KIP.Objects.TrendingGraph=function(t,e,i){this.min_x=e||1e7,this.min_y=i||1e7,this.hslRotate=KIP.Constants.HSLPieceEnum.Hue,this.style={fill:{},stroke:{type:"solid",width:"0.2"},font:{family:"Calibri"}},this.fontStyle={fill:{type:"solid"},font:{family:"Calibri"}},KIP.Objects.Graph.call(this,t,KIP.Constants.GraphTypeEnum.Trend)},KIP.Objects.TrendingGraph.prototype=Object.create(KIP.Objects.Graph.prototype),KIP.Objects.TrendingGraph.prototype.AddDataAppropriateForGraph=function(t){"use strict";var e;e=this.data[t],this.UpdateView(e.x,e.y,1,1)},KIP.Objects.TrendingGraph.prototype.AddLineListeners=function(t,e,i){"use strict";var s=this;t&&e&&(t.addEventListener("mouseover",function(){e.style.opacity=1,t.style.strokeWidth=3*s.style.stroke.width+"px",i&&(i.style.opacity=.8)}),t.addEventListener("mouseout",function(){e.style.opacity=0,t.style.strokeWidth=s.style.stroke.width+"px",i&&(i.style.opacity=0)}),e.style.opacity=0)},KIP.Objects.TrendingGraph.prototype.Refresh=function(){"use strict";var t,e,i,s,n,o,r,a,h,l;for(e=this.data.slice(),e=e.sort(function(t,e){return t&&e?void 0===t.z||void 0===e.z?0:t.z>e.z?1:t.z<e.z?-1:t.x>e.x?1:t.x<e.x?-1:0:0}),a=this.max_x-this.min_x,h=this.max_y-this.min_y,this.style.stroke.width=Math.min(a,h)/70,this.fontStyle.font.size=8*this.style.stroke.width,n=this.CreateGroup("pts"),o=this.CreateGroup("txt"),s=0;s<e.length;s+=1)t=e[s],void 0===t.z&&!r||i!==t.z?(this.fontStyle.fill.color=this.style.stroke.color=KIP.Functions.GenerateColor("",this.hslRotate),void 0!==t.z&&(i=t.z),r=this.AddChild("path",{d:""},this.style,"","",n),l=this.AddText(r,t.lbl,t.x,t.y,this.fontStyle,"","","",o),this.AddLineListeners(r,l),this.MoveTo(t.x,t.y,r)):this.LineTo(t.x,t.y,r)},KIP.Functions.DateDiff=function(t,e,i,s){"use strict";var n,o;return n=864e5,o=t>e||i?t-e:e-t,s?o:Math.round(o/n)},KIP.Functions.ShortDate=function(t){"use strict";var e;return e=parseInt(t.getFullYear())%100,t.getMonth()+1+"/"+t.getDate()+"/"+e},KIP.Functions.ShortTime=function(t,e){"use strict";var i,s,n;return i=parseInt(t.getMinutes()),s=parseInt(t.getHours()),n="",10>i&&(i="0"+i),e&&(n=" AM",s>=12&&(n=" PM"),s>12&&(s-=12)),s+":"+i+n},KIP.Functions.ShortDateTime=function(t,e){"use strict";return KIP.Functions.ShortDate(t)+" "+KIP.Functions.ShortTime(t,e)},KIP.Functions.StopwatchDisplay=function(t,e,i){"use strict";var s,n,o,r,a;return s=Math.floor(t/1e3),t%=1e3,n=Math.floor(s/60),s%=60,o=Math.floor(n/60),n%=60,r=Math.floor(o/24),o%=24,e||(a=KIP.Functions.AddLeadingZeroes(2,String(s),String(n),String(o)),s=a[0],n=a[1],o=a[2]),r+"D  "+o+":"+n+":"+s+" '"+t},KIP.Functions.AddLeadingZeroes=function(t){"use strict";var e,i,s,n;for(n=[],e=1;e<arguments.length;e+=1)for(i=arguments[e],s=i.length;t>s;s+=1)n[e-1]="0"+i;return n},KIP.Functions.AddToDate=function(t,e){"use strict";return e.milliseconds&&t.setMilliseconds(t.getMilliseconds()+e.milliseconds),e.seconds&&t.setSeconds(t.getSeconds()+e.seconds),e.minutes&&t.setMinutes(t.getMinutes()+e.minutes),e.hours&&t.setHours(t.getHours()+e.hours),e.days&&t.setDate(t.getDate()+e.days),t},KIP.Functions.Piece=function(t,e,i){var s,n,o;for(n=-1,o=t.indexOf(e),s=0;i-1>s;s+=1)if(n=o,o=t.indexOf(e,o+1),-1===n)return"";return-1===o?t.substr(n+1):t.substring(n+1,o)},KIP.Functions.TitleCase=function(t,e){var i,s,n;for(e=e||" ",n="",i=t.split(e),s=0;s<i.length;s+=1)0!==s&&(n+=e),n+=KIP.Functions.CharAt(i[s],0).toUpperCase(),n+=KIP.Functions.Rest(i[s],1).toLowerCase();return n},KIP.Functions.SentenceCase=function(t){var e;return e=KIP.Functions.CharAt(t,0).toUpperCase(),e+=KIP.Functions.Rest(t,1).toLowerCase()},KIP.Functions.CharAt=function(t,e){return t.substr(e,1)},KIP.Functions.Rest=function(t,e){return t.substring(e,t.length)},KIP.Functions.Trim=function(t){var e;return e=t.replace(/^\s*/g,""),e=e.replace(/\s*?$/g,"")},KIP.Constants.HueInterval=22,KIP.Constants.LightInterval=20,KIP.Constants.SaturationInterval=20,KIP.Constants.SaturationLimits={Max:100,Min:20},KIP.Constants.LightnessLimits={Max:80,Min:35},KIP.Constants.HSLPieceEnum={Saturation:0,Lightness:1,Hue:2},KIP.Functions.GenerateColor=function(t,e){"use strict";var i;return KIP.Globals.UsedColors||(KIP.Globals.UsedColors={}),KIP.Globals.ColorObj||(KIP.Globals.ColorObj=new KIP.Objects.Color,KIP.Globals.ColorObj.ParseFromHSLColor("hsl(330, 80%, 50%)")),i=KIP.Globals.ColorObj.GetNextHue(e||0),t&&(KIP.Globals.UsedColors[t]=i),i},KIP.Functions.GetCurrentColor=function(){return KIP.Globals.ColorObj||(KIP.Globals.ColorObj=new KIP.Objects.Color,KIP.Globals.ColorObj.ParseFromHSLColor("hsl(330, 80%, 50%)")),KIP.Globals.ColorObj.GetCurrentHue()},KIP.Functions.HexToRGB=function(t){"use strict";var e;return e=new KIP.Objects.Color,e.ParseFromHexColor(t),
e.RGBString()},KIP.Functions.HexToRBA=function(t,e){"use strict";var i;return i=new KIP.Objects.Color,i.ParseFromHexColor(t,e),i.RGBAString()},KIP.Functions.HSLToRGB=function(t){"use strict";var e;return e=new KIP.Objects.Color,e.ParseFromHSLColor(t),e.RGBString()},KIP.Functions.HSLAToRBGA=function(t,e){var i;return i=new KIP.Objects.Color,i.ParseFromHSLColor(t,e),i.RGBAString()},KIP.Functions.FullHexString=function(t,e){"use strict";var i,s;if(e=e||0,i=t.toString(16),i.length<e)for(s=0;s<i.length-e;s+=1)i="0"+i;return i},KIP.Objects.Color=function(t,e,i,s){"use strict";this.red=t||0,this.green=e||0,this.blue=i||0,this.alpha=s||1},KIP.Objects.Color.prototype.RGBAString=function(){"use strict";return this.RGBString(!0)},KIP.Objects.Color.prototype.RGBString=function(t){"use strict";var e;return e="rgba("+this.red+", "+this.green+", "+this.blue,t&&(e+=", "+this.alpha),e+=")"},KIP.Objects.Color.prototype.HSLString=function(t){"use strict";var e;return this.hue||this.GenerateHSLValues(),e="hsl("+this.hue+", "+this.saturation+"%, "+this.lightness+"%",t&&(e+=", "+this.alpha),e+=")"},KIP.Objects.Color.prototype.HSLAString=function(){"use strict";return this.HSLString(!0)},KIP.Objects.Color.prototype.HexString=function(t){"use strict";var e;return e="#",e+=KIP.Functions.FullHexString(this.red,2),e+=KIP.Functions.FullHexString(this.green,2),e+=KIP.Functions.FullHexString(this.blue,2),t&&(e+=KIP.Functions.FullHexString(this.alpha,2)),e},KIP.Objects.Color.prototype.GenerateHSLValues=function(){"use strict";var t,e,i,s,n,o,r,a,h;return t=this.red/255,e=this.green/255,i=this.blue/255,o=Math.max(t,e,i),r=Math.min(t,e,i),n=o-r,s=(o+r)/2,o===r?(this.hue=0,this.saturation=0,void(this.lightness=Math.round(100*s))):(h=s>.5?n/(2-o-r):n/(o+r),o===t?(a=(e-i)/n,i>e&&(a+=6)):a=o===e?(i-t)/n+2:(t-e)/n+4,a/=6,this.hue=Math.round(3600*a)/10,this.saturation=Math.round(1e3*h)/10,this.lightness=Math.round(1e3*s)/10,void(this.startHue||(this.startHue=this.hue,this.startSat=this.saturation,this.startLight=this.lightness)))},KIP.Objects.Color.prototype.GenerateRGBValues=function(){"use strict";var t,e,i,s,n,o,r;if(t=this.hue/360,e=this.saturation/100,i=this.lightness/100,0===e)return this.red=this.green=this.blue=i,!0;for(n=.5>i?i*(1+e):i+e-i*e,s=2*i-n,r=-1;1>=r;r+=1)o=t+-r/3,0>o?o+=1:o>1&&(o-=1),1/6>o?this.SetAppropriateColor(r+1,255*(s+6*(n-s)*o)):.5>o?this.SetAppropriateColor(r+1,255*n):2/3>o?this.SetAppropriateColor(r+1,255*(s+(n-s)*(2/3-o)*6)):this.SetAppropriateColor(r+1,255*s)},KIP.Objects.Color.prototype.ParseFromHexColor=function(t,e){"use strict";var i,s,n,o,r,a;if(r=/^#?(?:[0-9A-Fa-f]{3,4}){1,2}$/,!r.test(t))return!1;for("#"===KIP.Functions.CharAt(t,0)&&(t=KIP.Functions.Rest(t,1)),a=t.length<6?1:2,i=0;i<t.length;i+=a)n=t.substr(i,a),1===a&&(n+=n),s=parseInt(n,16),this.SetAppropriateColor(i/a,s),i>4&&(o=!0);return o||(this.alpha=e||0),!0},KIP.Objects.Color.prototype.ParseFromRGBColor=function(t,e){"use strict";var i,s,n;if(i=/rgb\((?:([0-9]{1-3}), ?){3}\)/,s=/rgba\((?:([0-9]{1-3}), ?){3}, ?([0-9]{0,1}(?:\.[0-9]+)?)\)/,i.test(t))n=i.exec(t);else{if(!s.test(t))return!1;n=s.exec(t)}return this.red=n[1],this.green=n[2],this.blue=n[3],(void 0!==n[4]||void 0!==e)&&(this.alpha=n[4]||e),!0},KIP.Objects.Color.prototype.ParseFromHSLColor=function(t,e){"use strict";var i,s,n;if(i=/hsl\(([0-9]{1,3}), ?([0-9]{1,3})%, ?([0-9]{1,3})%\)/,s=/hsla\(([0-9]{1,3}), ?([0-9]{1,3})%, ?([0-9]{1,3})%, ?([0-9]{0,1}(?:\.[0-9]+)?)\)/,i.test(t))n=i.exec(t);else{if(!s.test(t))return!1;n=s.exec(t)}return this.hue=Math.round(10*parseFloat(n[1]))/10,this.saturation=Math.round(10*parseFloat(n[2]))/10,this.lightness=Math.round(10*parseFloat(n[3]))/10,(void 0!==n[4]||void 0!==e)&&(this.alpha=parseFloat(n[4])||e),this.GenerateRGBValues(),!0},KIP.Objects.Color.prototype.ParseColorString=function(t,e){"use strict";var i;return(i=this.ParseFromRGBColor(t,e))?!0:(i=this.ParseFromHexColor(t,e))?!0:(i=this.ParseFromHSLColor(t,e),i?!0:!1)},KIP.Objects.Color.prototype.SetAppropriateColor=function(t,e){"use strict";switch(e=3>t?Math.min(255,Math.max(0,Math.round(e))):Math.min(1,Math.max(0,e)),t){case 0:this.red=e;break;case 1:this.green=e;break;case 2:this.blue=e;break;case 3:this.alpha=e}},KIP.Objects.Color.prototype.GetNextHue=function(t,e){"use strict";var i,s=[];for(this.startHue||this.GenerateHSLValues(),s[0]=t,s[1]=(t+1)%3,s[2]=(t+2)%3,i=0;i<s.length&&this.RotateAppropriateHSLValue(s[i]);i+=1);return this.GenerateRGBValues(),this.HexString(e)},KIP.Objects.Color.prototype.GetCurrentHue=function(t){return this.HexString(t)},KIP.Objects.Color.prototype.RotateAppropriateHSLValue=function(t){"use strict";var e,i;switch(t){case KIP.Constants.HSLPieceEnum.Saturation:e=this.RotateSaturation(),i=this.startSat;break;case KIP.Constants.HSLPieceEnum.Lightness:e=this.RotateLightness(),i=this.startLight;break;case KIP.Constants.HSLPieceEnum.Hue:e=this.RotateHue(),i=this.startHue}return e===i?!0:!1},KIP.Objects.Color.prototype.RotateHue=function(){"use strict";return this.hue=this.RotateHSLValue(this.hue,KIP.Constants.HueInterval,360)},KIP.Objects.Color.prototype.RotateSaturation=function(){"use strict";return this.saturation=this.RotateHSLValue(this.saturation,KIP.Constants.SaturationInterval,100,KIP.Constants.SaturationLimits.Max,KIP.Constants.SaturationLimits.Min)},KIP.Objects.Color.prototype.RotateLightness=function(){return this.lightness=this.RotateHSLValue(this.lightness,KIP.Constants.LightInterval,100,KIP.Constants.LightnessLimits.Max,KIP.Constants.LightnessLimits.Min)},KIP.Objects.Color.prototype.RotateHSLValue=function(t,e,i,s,n){"use strict";var o;if(o=t+=e,o%=i,!s)return KIP.Functions.RoundToPlace(o,10);if(!n&&0!==n)return KIP.Functions.RoundToPlace(o,10);for(;n>o||o>s;)o=t+=e,o%=i;return KIP.Functions.RoundToPlace(o,10)},KIP.Objects.Color.prototype.GetApparentColor=function(t){"use strict";var e,i;if(t.red)e=t;else if(e=new KIP.Objects.Color,!e.ParseColorString(t))return!1;return i=1-this.alpha,this.red=Math.round(this.red*this.alpha+e.red*i),this.green=Math.round(this.green*this.alpha+e.green*i),this.blue=Math.round(this.blue*this.alpha+e.blue*i),this.alpha=1,!0},KIP.Objects.Color.prototype.IsDark=function(){"use strict";return this.hue||this.GenerateHSLValues(),this.lightness<=50},KIP.Objects.Color.prototype.IsLight=function(){"use strict";return this.hue||this.GenerateHSLValues(),this.lightness>50},KIP.Functions.AJAXRequest=function(t,e,i,s,n){var o=!1;try{o=new XMLHttpRequest}catch(r){try{o=new ActiveXObject("Msxml2.XMLHTTP")}catch(r){try{o=new ActiveXObject("Microsoft.XMLHTTP")}catch(r){return!1}}}return o?("function"!=typeof i&&(i=function(){}),"function"!=typeof s&&(s=function(){}),o.onreadystatechange=function(){return 4===o.readyState?200===o.status?i(o.responseText):s(o.responseText):void 0},"GET"===t?(o.open("GET",e,!0),o.send(null)):"POST"===t&&(o.open("POST",e,!0),o.setRequestHeader("Content-type","application/x-www-form-urlencoded"),o.send(n)),o):!1},KIP.Functions.CreateSVG=function(t,e,i,s,n,o){"use strict";if(t||0===t){var r=document.createElementNS("http://www.w3.org/2000/svg","svg");return r.setAttribute("id",t),r.setAttribute("width",e||0),r.setAttribute("height",i||0),r.setAttribute("viewBox",s||"0 0 0 0"),n&&(r.innerHTML=n),o||r.setAttribute("preserveAspectRatio","xMinYMin meet"),r}},KIP.Functions.CreateSVGElem=function(t,e,i,s){var n,o;n=document.createElementNS("http://www.w3.org/2000/svg",e),i&&n.setAttribute("class",i);for(o in s)s.hasOwnProperty(o)&&n.setAttribute(o,s[o]);return n},KIP.Objects.Drawable=function(t,e,i){this.div=KIP.Functions.CreateSimpleElement(t,e,i),this.children=[],this.style=this.div.style},KIP.Objects.Drawable.prototype.AppendChild=function(t,e,i){"use strict";this.children||(this.children=[]),i||0===i||(i=this.children.length),t.Draw&&(this.children.splice(i,0,t),this.children[i].parent=e||this.div)},KIP.Objects.Drawable.prototype.RemoveChild=function(t){"use strict";var e;if(!this.children)return!1;for(e=0;e<this.children.length;e+=1)this.children[e]===t&&this.children.splice(e,1);return t.parentNode&&t.parentNode.removeChild(t),!0},KIP.Objects.Drawable.prototype.Draw=function(t,e){"use strict";this.div&&(this.parent=t||this.parent,this.Refresh(),this.div.parentNode&&!e&&this.div.parentNode.removeChild(this.div),this.parent.appendChild(this.div),this.BeforeDrawChildren(),this.children&&(this.children.map(function(t,e,i){t&&t.Draw()}),this.AfterDrawChildren()))},KIP.Objects.Drawable.prototype.Erase=function(){this.div.parentNode&&this.div.parentNode.removeChild(this.div)},KIP.Objects.Drawable.prototype.Refresh=function(){},KIP.Objects.Drawable.prototype.BeforeDrawChildren=function(){},KIP.Objects.Drawable.prototype.AfterDrawChildren=function(){},KIP.Functions.DrawLine=function(t,e,i){"use strict";var s,n,o;return n=KIP.Functions.GetDistance(t,e),s=KIP.Functions.GetAngle(t,e),o=KIP.Functions.CreateSimpleElement("","angledLine"),o.style.position="absolute",o.style.left=t.x+"px",o.style.top=t.y+"px",o.style.width=n+"px",o.style.height="1px",o.style.transformOrigin="0px 0px",o.style.transform="rotate("+s+"deg)",i.appendChild(o),o},KIP.Functions.ConnectElements=function(t,e){"use strict";var i,s,n,o,r,a,h;return h=KIP.Functions.FindCommonParent(t,e),n=KIP.Functions.GlobalOffsetLeft(t,h)+t.offsetWidth/2,o=KIP.Functions.GlobalOffsetLeft(e,h)+e.offsetWidth/2,r=KIP.Functions.GlobalOffsetTop(t,h)+t.offsetHeight/2,a=KIP.Functions.GlobalOffsetTop(e,h)+e.offsetHeight/2,i={x:n,y:r},s={x:o,y:a},KIP.Functions.DrawLine(i,s,h)},KIP.Functions.GetDistance=function(t,e){"use strict";var i,s,n;return s=t.x-e.x,n=t.y-e.y,i=Math.sqrt(s*s+n*n)},KIP.Functions.GetAngle=function(t,e){"use strict";var i,s,n,o,r;return i=e.x-t.x,s=e.y-t.y,0===i?0>s?270:90:0===s?0>i?180:0:(n=i*s>0?1:-1,o=0>i?Math.PI:0,r=Math.atan(Math.abs(s)/Math.abs(i)),r=r*n+o,r*(180/Math.PI))},KIP.Functions.DegreesToRadians=function(t){var e=Math.PI*t/180;return e},KIP.Objects.Editable=function(t,e,i,s,n){this.id=t,this.type=e||"text",this.content=i,this.validate=s,this.update=n,this.is_modifying=!1,KIP.Objects.Drawable.call(this,this.id,"editable",this.content),this.CreateElements(),this.AddListeners()},KIP.Objects.Editable.prototype=Object.create(KIP.Objects.Drawable.prototype),KIP.Objects.Editable.prototype.AddListeners=function(){var t=this;this.div.onclick=function(e){t.is_modifying||t.Modify(),e.stopPropagation&&e.stopPropagation(),null!==e.cancelBubble&&(e.cancelBubble=!0)},window.addEventListener("click",function(e){e.target!==t.div&&t.is_modifying&&t.Save()}),this.inputDiv.onkeydown=function(e){13===e.keyCode&&t.is_modifying&&t.Save()}},KIP.Objects.Editable.prototype.CreateElements=function(){this.inputDiv=KIP.Functions.CreateElement({type:"input",id:this.id+"|input",attr:[{key:"type",val:this.type}]})},KIP.Objects.Editable.prototype.Modify=function(){this.is_modifying=!0,this.inputDiv.value=this.content,this.div.innerHTML="",this.div.appendChild(this.inputDiv),this.inputDiv.select(),this.inputDiv.focus()},KIP.Objects.Editable.prototype.Save=function(){var t;return t=this.inputDiv.value,this.div.removeChild(this.inputDiv),this.is_modifying=!1,this.validate&&!this.validate(t)?(this.inputDiv.value=this.content,void(this.div.innerHTML=this.content)):(this.content=t,this.div.innerHTML=t,this.update&&this.update(this.content,this),void 0)};